<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Pedido - BitCake</title>

    <link rel="shortcut icon" href="./assets/logo.png" type="image/x-icon">

    <link rel="shortcut icon" href="" type="image/x-icon">
    <link rel="stylesheet" href="./styles/output.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet" />
</head>
<body class="bg-gray-100">

    <header class="w-full bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-4xl mx-auto flex items-center justify-between p-4">
            <a href="index.html" class="flex items-center gap-2 text-zinc-900 hover:text-[#b96d5c] transition-colors duration-200">
                <i class="fas fa-arrow-left text-lg"></i>
                <h1 class="text-xl font-bold">Voltar ao Cardápio</h1>
            </a>
            <img src="./assets/logo.png" alt="Logo BitCake" class="w-10 h-10 rounded-full shadow-sm">
        </div>
    </header>

    <div class="max-w-4xl mx-auto p-4 md:p-8 mb-20">

        <h2 class="text-3xl md:text-4xl font-bold text-zinc-900 mb-8 border-b-2 border-[#b96d5c] pb-3">
           <i class="fas fa-receipt text-[#b96d5c] mr-2"></i> Finalizar Pedido
        </h2>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-xl border border-gray-200">

                <section class="mb-8">
                    <h3 class="text-2xl font-semibold text-[#b96d5c] mb-5 pb-2 border-b border-gray-200 flex items-center">
                        <i class="fas fa-map-marked-alt mr-3"></i> 1. Contato e Entrega
                    </h3>
                    <form id="delivery-form" class="space-y-4">
                        
                        <div>
                            <label for="phone-input" class="block text-base font-medium text-gray-800 mb-1">Telefone (WhatsApp)*</label>
                            <input
                                type="tel"
                                id="phone-input"
                                placeholder="(XX) XXXXX-XXXX"
                                class="w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-[#b96d5c]/30 transition duration-200 shadow-sm"
                                required
                            >
                            <p class="text-red-600 text-sm mt-1 hidden font-medium" id="phone-warn">* Por favor, informe seu telefone.</p>
                        </div>
                        <div>
                            <label for="address-input" class="block text-base font-medium text-gray-800 mb-1">Endereço Completo*</label>
                            <input
                                type="text"
                                id="address-input"
                                placeholder="Ex: Rua das Flores, 123, Centro"
                                class="w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-[#b96d5c]/30 transition duration-200 shadow-sm"
                                required
                            >
                            <p class="text-red-600 text-sm mt-1 hidden font-medium" id="address-warn">* Por favor, informe seu endereço completo.</p>
                        </div>
                        <div>
                            <label for="notes-input" class="block text-base font-medium text-gray-800 mb-1">Observações (Opcional)</label>
                            <textarea
                                id="notes-input"
                                placeholder="Alguma instrução especial para a entrega?"
                                rows="3"
                                class="w-full p-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-[#b96d5c]/30 transition duration-200 shadow-sm"
                            ></textarea>
                        </div>
                    </form>
                </section>

                <section>
                    <h3 class="text-2xl font-semibold text-[#b96d5c] mb-5 pb-2 border-b border-gray-200 flex items-center">
                        <i class="fas fa-credit-card mr-3"></i> 2. Método de Pagamento
                    </h3>
                    <div class="space-y-4" id="payment-methods">

                        <div class="payment-option border-2 border-gray-300 rounded-lg hover:border-[#b96d5c] transition duration-200 has-[:checked]:border-[#b96d5c] has-[:checked]:ring-2 has-[:checked]:ring-[#b96d5c]/30">
                           <label class="flex items-center p-4 cursor-pointer">
                                <input type="radio" name="payment-method" value="Pix" class="w-5 h-5 text-[#b96d5c] focus:ring-[#b96d5c] mr-4">
                                <span class="font-medium text-gray-900 flex items-center text-lg">
                                    <i class="fas fa-qrcode mr-3 text-xl text-green-600"></i> Pix
                                    <span class="ml-auto text-xs font-normal text-green-700 bg-green-100 px-2 py-0.5 rounded-full">Rápido e Fácil</span>
                                </span>
                           </label>
                           <div id="details-pix" class="ml-12 mr-4 mb-4 p-4 border-t border-gray-200 bg-gray-50 rounded-b-md hidden">
                                <p class="font-semibold text-gray-800 mb-2">Pague com esta chave PIX (aleatória, apenas para teste):</p>
                                <p id="pix-key-display" class="text-sm font-mono bg-white p-3 border border-gray-300 rounded-md break-all shadow-sm">Selecione Pix para gerar a chave</p>
                                <button id="copy-pix-btn" class="mt-3 text-sm bg-[#014926] text-white px-4 py-1.5 rounded-md hover:bg-green-700 transition shadow flex items-center gap-1 disabled:opacity-50" disabled>
                                    <i class="far fa-copy"></i> Copiar Chave
                                </button>
                           </div>
                        </div>

                        <div class="payment-option border-2 border-gray-300 rounded-lg hover:border-[#b96d5c] transition duration-200 has-[:checked]:border-[#b96d5c] has-[:checked]:ring-2 has-[:checked]:ring-[#b96d5c]/30">
                            <label class="flex items-center p-4 cursor-pointer">
                                <input type="radio" name="payment-method" value="Cartão" class="w-5 h-5 text-[#b96d5c] focus:ring-[#b96d5c] mr-4">
                                <span class="font-medium text-gray-900 flex items-center text-lg">
                                    <i class="fas fa-credit-card mr-3 text-xl text-blue-600"></i> Cartão de Crédito/Débito
                                </span>
                            </label>
                             <div id="details-cartao" class="ml-12 mr-4 mb-4 p-4 border-t border-gray-200 bg-gray-50 rounded-b-md hidden space-y-4">
                                <div>
                                    <label for="card-number" class="block text-sm font-medium text-gray-700 mb-1">Número do Cartão*</label>
                                    <input type="text" id="card-number" name="card_number" placeholder="0000 0000 0000 0000" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#b96d5c]/50 focus:border-[#b96d5c] outline-none shadow-sm" required>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label for="card-expiry" class="block text-sm font-medium text-gray-700 mb-1">Validade (MM/AA)*</label>
                                        <input type="text" id="card-expiry" name="card_expiry" placeholder="MM/AA" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#b96d5c]/50 focus:border-[#b96d5c] outline-none shadow-sm" required>
                                    </div>
                                    <div>
                                        <label for="card-cvv" class="block text-sm font-medium text-gray-700 mb-1">CVV*</label>
                                        <input type="text" id="card-cvv" name="card_cvv" placeholder="123" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#b96d5c]/50 focus:border-[#b96d5c] outline-none shadow-sm" required>
                                    </div>
                                </div>
                                <div>
                                    <label for="card-name" class="block text-sm font-medium text-gray-700 mb-1">Nome no Cartão*</label>
                                    <input type="text" id="card-name" name="card_name" placeholder="Como impresso no cartão" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#b96d5c]/50 focus:border-[#b96d5c] outline-none shadow-sm" required>
                                </div>
                            </div>
                        </div>

                        <div class="payment-option border-2 border-gray-300 rounded-lg hover:border-[#b96d5c] transition duration-200 has-[:checked]:border-[#b96d5c] has-[:checked]:ring-2 has-[:checked]:ring-[#b96d5c]/30">
                            <label class="flex items-center p-4 cursor-pointer">
                                <input type="radio" name="payment-method" value="Dinheiro" class="w-5 h-5 text-[#b96d5c] focus:ring-[#b96d5c] mr-4">
                                <span class="font-medium text-gray-900 flex items-center text-lg">
                                    <i class="fas fa-money-bill-wave mr-3 text-xl text-green-700"></i> Dinheiro
                                    <span class="ml-auto text-xs text-gray-600 flex items-center">(Troco para: R$
                                        <input type="number" id="troco-input" name="troco_para" placeholder="0.00" step="0.01" class="ml-1 w-20 p-1 border rounded text-sm focus:ring-1 focus:ring-[#b96d5c] outline-none">)
                                    </span>
                                </span>
                            </label>
                            </div>
                    </div>
                </section>

            </div>

            <div class="lg:col-span-1 bg-white p-6 rounded-lg shadow-xl h-fit sticky top-24 border-t-4 border-[#b96d5c]">
                <h3 class="text-2xl font-bold text-zinc-900 mb-4 pb-3 border-b border-gray-300">Resumo do Pedido</h3>

                <div id="order-summary" class="space-y-3 mb-5 text-base">
                    <p class="text-gray-500 italic">Carregando itens...</p>
                </div>

                <div class="pt-4 border-t border-gray-300 space-y-2">
                    <p class="flex justify-between text-lg text-gray-700">Subtotal: <span id="summary-subtotal" class="font-medium">R$ 0,00</span></p>
                    <p class="flex justify-between text-lg text-gray-700">Entrega: <span id="summary-delivery" class="font-medium">R$ 10,00</span></p>
                    <p class="flex justify-between font-bold text-2xl mt-2 text-[#014926]">Total: <span id="summary-total">R$ 10,00</span></p>
                </div>

                <button
                    id="finalize-order-btn"
                    class="w-full bg-[#b96d5c] text-white py-3 mt-6 rounded-lg font-bold text-xl hover:bg-[#a95d4c] transition-colors duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled
                >
                    <i class="fas fa-check-circle mr-2"></i> Finalizar Pedido
                </button>
                <p class="text-center text-xs text-gray-500 mt-3">Revise seu pedido antes de finalizar.</p>
            </div>

        </div>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js" defer></script> </body>
</html>